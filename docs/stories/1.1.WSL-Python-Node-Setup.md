---
title: "Story 1.1: WSL Python 3.12 & Node Environment Setup"
epic: 1
story: 1
status: Draft
---

## Story

**As a** developer (local/CI),
**I want** a reproducible WSL 2 development environment with Python 3.12 and Node.js configured,
**so that** contributors can run and develop the project consistently and CI pipelines can execute reliably.

## Acceptance Criteria

1. WSL 2 environment instructions documented and validated on a clean WSL instance.
2. Python 3.12 installed and virtual environment workflow documented (.venv or venv), with required minimum packages listed.
3. Node.js (LTS) installed and preferred package manager (npm/yarn/pnpm) recommended and installed.
4. Database connectivity from WSL to Windows host Postgres is demonstrably possible (connection instructions & required host firewall/pg_hba adjustments documented) — full validation delegated to Story 1.2.
5. A minimal verification script or checklist exists to confirm environment readiness (python --version, node --version, pip freeze sample, npm --version).

Recommended concrete defaults (add to story to avoid ambiguity):

- Python: 3.12.x (use `>=3.12,<3.13` in tooling)
- Node: LTS 20.x
- Preferred package manager: `pnpm` (recommendation) — adjust to org preference if different
- Required env vars for subsequent stories: `POSTGRES_HOST`, `POSTGRES_PORT`, `POSTGRES_USER`, `POSTGRES_PASSWORD`, `DATABASE_URL`

## Dev Notes

Previous Story Insights:
- No previous dev-agent records exist. This is the first story in Epic 1. [Source: docs/prd_shards/05-epics.md#Epic-1]

Data / Tech Stack Guidance:
- Follow the project's tech stack and coding standards for tooling versions and workflows. [Source: docs/architecture/tech-stack.md]
- Respect source tree and file locations when creating setup scripts and docs. [Source: docs/architecture/source-tree.md]

Environment & Project Structure:
- Place environment setup documentation and scripts under `dev/` and `docs/setup/` per source-tree guidance. If those folders do not exist, create `dev/` for scripts and `docs/setup/` for user-facing instructions. [Source: docs/architecture/source-tree.md]

Auth / Security / Constraints:
- Do not commit secrets. Instruct use of `.env` files and add `.env` to `.gitignore`. Follow security guidelines in `docs/prd_shards/12-security.md` for any credentials handling. [Source: docs/prd_shards/12-security.md]

Testing / Validation:
- Include a small `verify_env.sh` (or PowerShell equivalent) that checks installed versions and attempts a TCP connection to the configured Postgres host/port. Add unit-like checks as shell exit codes for CI consumption. [Source: docs/architecture/testing-strategy.md (if present) or docs/architecture/tech-stack.md]

If specific guidance is missing:
- No explicit WSL setup steps found in architecture docs; instructions must be explicit and reproduceable in this story. [Source: docs/prd_shards/05-epics.md]

## Tasks / Subtasks

- [ ] Task 1 (AC: 1,5) — Create reproducible WSL 2 setup instructions
  - [ ] Draft `docs/setup/wsl-setup.md` with step-by-step commands for enabling WSL2, installing distro, and kernel updates. [Source: docs/prd_shards/05-epics.md]
  - [ ] Add notes about virtualization requirements and links to Microsoft docs.

- [ ] Task 2 (AC: 2) — Install & document Python 3.12 and venv workflow
  - [ ] Create `dev/setup_python.sh` to install Python 3.12 (or document distro packages). [Source: docs/architecture/tech-stack.md]
  - [ ] Document virtualenv usage and recommended `requirements.txt` or `pyproject.toml` location.

- [ ] Task 3 (AC: 3) — Install & document Node.js LTS and package manager
  - [ ] Create `dev/setup_node.sh` to install Node LTS and preferred package manager; document `package.json` expectations. [Source: docs/architecture/tech-stack.md]

- [ ] Task 4 (AC: 4) — Provide DB connectivity verification instructions (coord with Story 1.2)
  - [ ] Add `docs/setup/postgres-wsl.md` with pg_hba and firewall checklist referencing Story 1.2 for Windows host changes. [Source: docs/prd_shards/05-epics.md#Story-1.2]
  - [ ] Create `dev/verify_env.sh` that tests connectivity to configured Postgres host and checks versions.

Minimal `dev/verify_env.sh` (suggested content):

```sh
#!/bin/sh
set -e
python --version
node --version
pnpm --version || npm --version
echo "ENV VARS: POSTGRES_HOST=${POSTGRES_HOST:-unset} POSTGRES_PORT=${POSTGRES_PORT:-unset}"
# Optional: attempt TCP connect to POSTGRES_HOST:POSTGRES_PORT (requires nc)
if command -v nc >/dev/null 2>&1; then
  nc -zv ${POSTGRES_HOST:-localhost} ${POSTGRES_PORT:-5432} || true
fi
echo "verify_env completed"
```

Minimal GitHub Actions snippet for CI (suggested):

```yaml
name: Env Verify
on: [workflow_dispatch]
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run env verify
        run: ./dev/verify_env.sh
        env:
          POSTGRES_HOST: ${{ secrets.POSTGRES_HOST }}
          POSTGRES_PORT: ${{ secrets.POSTGRES_PORT }}
```

- [ ] Task 5 (AC: 5) — Add CI-friendly verification and update README
  - [ ] Add a GitHub Actions workflow snippet or local script instructions to run `dev/verify_env.sh` as a fast checklist.
  - [ ] Update top-level `README.md` with a short Getting Started linking to `docs/setup/*`.

## Testing

- Add tests as simple shell checks; unit tests not required for this story but ensure CI step exits non-zero on failure. Reference testing patterns in architecture docs if present. [Source: docs/architecture/testing-strategy.md (if present)]

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|

## Dev Agent Record

*To be populated by the development agent during implementation.*

## QA Results

*To be populated by QA agent.*
