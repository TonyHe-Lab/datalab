---
title: "Story 2.3 PII Baseline: Method & Repro"
date: 2025-12-28
author: Dev Agent
---

Overview
- This document describes the method to compute precision/recall for PII detection and redaction per AC-2.

Dataset
- Source: `tests/fixtures/pii_synthetic_samples.jsonl`
- Content: 5 synthetic samples including emails, phones (various formats), SSN, dates, MRN, Chinese names, and synthetic IDs.

Procedure
1. Load JSONL samples.
2. Run `detect_pii(text)` and flatten matches across all pattern categories.
3. Compute TP/FP/FN against provided `pii` list per sample.
4. Compute Precision = TP/(TP+FP), Recall = TP/(TP+FN).
5. Run `redact_pii(text)` and assert all expected PII values are absent from the redacted text.

Thresholds
- Gates: precision >= 0.95, recall >= 0.95.

Reproduction
- Execute test: `pytest tests/ai/test_pii_baseline_report.py -q`
- The test writes a small JSON report file (precision/recall) to a tmp directory and logs CI output for visibility.

Notes
- As we evolve patterns, extend the fixture file and adjust thresholds only with QA approval.
