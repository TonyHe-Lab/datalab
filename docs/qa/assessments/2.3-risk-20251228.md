# Story 2.3 Risk Assessment

## Overview
- **Story**: 2.3 - Azure OpenAI Integration & PII Scrubbing Logic
- **Assessment Date**: 2025-12-28
- **Assessor**: Quinn (Test Architect)

## Risk Matrix

### High Risk (Probability × Impact ≥ 9)
1. **PII 泄露风险**
   - **概率**: 中 (3) - PII 检测可能漏检
   - **影响**: 高 (5) - HIPAA 违规，法律后果
   - **得分**: 15 → **CRITICAL**
   - **缓解措施**: 强化 PII 检测基线测试，添加日志审计

2. **成本失控风险**
   - **概率**: 中 (3) - 缺少生产级监控
   - **影响**: 高 (5) - 财务损失
   - **得分**: 15 → **CRITICAL**
   - **缓解措施**: 接入 Prometheus/Alertmanager 监控

### Medium Risk (Probability × Impact 6-8)
3. **API 可靠性风险**
   - **概率**: 中 (3) - Azure OpenAI 服务可能不稳定
   - **影响**: 中 (3) - 系统功能降级
   - **得分**: 9 → **HIGH**
   - **缓解措施**: 扩展故障注入测试，提高恢复率

4. **数据提取质量风险**
   - **概率**: 中 (3) - Prompt 工程可能不完善
   - **影响**: 中 (3) - 数据质量下降
   - **得分**: 9 → **HIGH**
   - **缓解措施**: 500 样本测试验证，Prompt 优化

### Low Risk (Probability × Impact ≤ 5)
5. **性能风险**
   - **概率**: 低 (2) - 已实现批量和缓存
   - **影响**: 中 (3) - 响应时间增加
   - **得分**: 6 → **MEDIUM**
   - **缓解措施**: 建立性能基线监控

## Risk Summary
- **Critical**: 2
- **High**: 2  
- **Medium**: 1
- **Low**: 0

## Recommendations

### Must-Fix (Critical/High)
1. **PII 检测验证**
   - 完成 precision/recall ≥ 0.95 的基线报告
   - 添加日志审计确保无 PII 泄露

2. **成本监控系统**
   - 接入生产级监控（Prometheus/Alertmanager）
   - 实现成本阈值告警

3. **API 可靠性**
   - 扩展故障注入测试覆盖
   - 确保恢复率 ≥ 95%

### Should-Fix (Medium)
4. **数据提取质量**
   - 完成 500 样本通过率统计
   - 优化 Prompt 工程

5. **性能基线**
   - 建立 chat/embedding 延迟基线
   - 监控吞吐量指标

## Risk Acceptance Criteria
- 所有 Critical/High 风险必须缓解后才能进入生产
- Medium 风险应在下一个 sprint 解决
- Low 风险可纳入技术债务管理
